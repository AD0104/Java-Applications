<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/header :: header}">
</head>

<head>
    <script th:src="@{/js/remove-invalid-user-input.js}"></script>
</head>

<style>
    #errors {
        /*position: absolute;*/
        max-width: 100svw;
        width: 100%;
    }

    .alert {
        max-width: 100%;
    }
</style>

<body>
    <div class="container mt-5">
        <div id="errors"></div>
        <h1 class="mb-4">Signup Form</h1>

        <form action="#" th:action="@{/signup}" th:object="${applicationUserDTO}" method="post">
            <script th:inline="javascript" th:each="e : ${#fields.detailedErrors()}">
                show_error(/*[[${e.message}]]*/)
            </script>

            <div class="form-group">
                <label for="username">Username:</label>
                <input type="text" class="form-control" id="userName" name="userName" th:field="*{userName}"
                    th:classappend="${#fields.hasErrors('userName')} ? 'is-invalid'">
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" class="form-control" id="userPassword" name="userPassword"
                    th:field="*{userPassword}" th:classappend="${#fields.hasErrors('userPassword')} ? 'is-invalid'">
            </div>
            <div class="form-group">
                <label for="confirm-password">Confirm Password:</label>
                <input type="password" class="form-control" id="confirmPassword" name="confirmPassword"
                    th:field="*{confirmPassword}"
                    th:classappend="${#fields.hasErrors('confirmPassword')} ? 'is-invalid'">
            </div>
            <button type="submit" class="btn btn-primary">Signup</button>
        </form>
    </div>

    <section class="container">
        <ul>
            <li th:each="err : ${#fields.errors('global')}">
                <p th:text="${err}"></p>
            </li>
        </ul>
    </section>

    <!-- Bootstrap JS (Optional) -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script th:src="@{/js/remove-invalid-user-input.js}"></script>
</body>

</html>